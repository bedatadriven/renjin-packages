template:
  vmParams:
    machineType: n1-standard-1
    baseInstanceName: worker-replica
    disksToCreate:
      -  boot: true
         autoDelete: true
         initializeParams:
            diskSizeGb: 10
            sourceImage: "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-7-wheezy-v20140619"
    networkInterfaces:
      - network: default
        accessConfigs:
          - name: External NAT
            type: ONE_TO_ONE_NAT
    serviceAccounts:
      - email: default
        scopes: [
         "https://www.googleapis.com/auth/devstorage.read_write"
        ]
  action:
    commands: [
      "sudo apt-get install -y openjdk-7-jdk gcc-4.6 gcc-4.6-plugin-dev gfortran-4.6 gcc-4.6.multilib maven",
      "gsutil cp gs://renjinci-worker/worker.jar .",
      "test -d /root/.m2 || mkdir /root/.m2",
      "gsutil cp gs://renjinci-worker/worker-maven-settings.xml /root/.m2/settings.xml",
      "/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java -jar worker.jar &> worker.log &"
    ]
